import{a as L}from"./chunk-4IKGBRRM.js";import{a as mt,c as ft}from"./chunk-LMZ4HEPX.js";import{a as ct,e as it}from"./chunk-6IJM3GTH.js";import{a as lt}from"./chunk-YTXZXUDW.js";import{Ba as C,C as B,Ca as v,Cb as rt,D as Q,M as W,Na as Z,Nb as nt,Pa as a,Sb as pt,Tb as dt,Ub as M,Vb as at,Wb as b,Xa as y,Xb as I,Yb as st,Zb as ut,_,a as H,b as R,ba as m,c as Y,eb as P,ga as i,gb as S,hb as O,ib as p,jb as d,k as J,kb as $,lb as E,mb as u,nb as h,ob as x,pa as f,pb as k,qa as g,ra as X,rb as tt,sb as j,ta as z,tb as et,ub as ot,w as K}from"./chunk-G5K7HVYN.js";var T=class t{product=v.required();clicked=C();cartClicked=C();onClick(){this.clicked.emit(this.product().id)}onCartClick(o){o.stopPropagation(),this.cartClicked.emit(this.product())}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=y({type:t,selectors:[["app-product"]],inputs:{product:[1,"product"]},outputs:{clicked:"clicked",cartClicked:"cartClicked"},decls:16,vars:6,consts:[[1,"product-container",3,"click"],[1,"image-container"],["alt","Product",1,"image",2,"width","100%","height","100%","object-fit","cover",3,"src"],[1,"product-info"],[1,"price-actions"],[1,"cart-icon",3,"click"],["fill","currentColor","id","Cart","xmlns","http://www.w3.org/2000/svg","width","100%","height","100%","viewBox","0 0 902.86 902.86",0,"xml","space","preserve"],["d",`M671.504,577.829l110.485-432.609H902.86v-68H729.174L703.128,179.2L0,178.697l74.753,399.129h596.751V577.829z
               M685.766,247.188l-67.077,262.64H131.199L81.928,246.756L685.766,247.188z`],["d",`M578.418,825.641c59.961,0,108.743-48.783,108.743-108.744s-48.782-108.742-108.743-108.742H168.717
              c-59.961,0-108.744,48.781-108.744,108.742s48.782,108.744,108.744,108.744c59.962,0,108.743-48.783,108.743-108.744
              c0-14.4-2.821-28.152-7.927-40.742h208.069c-5.107,12.59-7.928,26.342-7.928,40.742
              C469.675,776.858,518.457,825.641,578.418,825.641z M209.46,716.897c0,22.467-18.277,40.744-40.743,40.744
              c-22.466,0-40.744-18.277-40.744-40.744c0-22.465,18.277-40.742,40.744-40.742C191.183,676.155,209.46,694.432,209.46,716.897z
               M619.162,716.897c0,22.467-18.277,40.744-40.743,40.744s-40.743-18.277-40.743-40.744c0-22.465,18.277-40.742,40.743-40.742
              S619.162,694.432,619.162,716.897z`]],template:function(e,r){e&1&&(p(0,"a",0),u("click",function(){return r.onClick()}),p(1,"div",1),$(2,"img",2),d(),p(3,"div",3)(4,"strong"),x(5),d(),p(6,"div",4)(7,"div"),x(8),j(9,"currency"),d(),p(10,"a",5),u("click",function(c){return r.onCartClick(c)}),X(),p(11,"svg",6)(12,"g")(13,"g"),$(14,"path",7)(15,"path",8),d()()()()()()()),e&2&&(a(2),P("src",r.product().imageUrl,Z),a(3),k(r.product().name),a(3),k(ot(9,3,r.product().price,"EUR")))},dependencies:[nt],styles:[".product-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:300px;width:200px;box-sizing:border-box;background-color:#f3f3f3;border:2px solid #dadada;cursor:pointer}.product-container[_ngcontent-%COMP%]:hover{border-color:#009b91}.product-container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;padding:10px;min-width:0;min-height:0}.product-container[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{height:100%;width:auto}.product-container[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:100%;height:70px;box-sizing:border-box;padding:5px 20px;gap:10px;color:#009b91;background-color:#dadada;font-size:12px}.product-container[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .price-actions[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between;align-items:center}.product-container[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .price-actions[_ngcontent-%COMP%]   .cart-icon[_ngcontent-%COMP%]{display:block;width:20px;height:20px}.product-container[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .price-actions[_ngcontent-%COMP%]   .cart-icon[_ngcontent-%COMP%]:hover{color:#009b91}"]})};var bt=(t,o)=>o.id;function wt(t,o){if(t&1){let e=E();p(0,"app-product",3),u("clicked",function(n){f(e);let c=h();return g(c.onClicked(n))})("cartClicked",function(n){f(e);let c=h();return g(c.onCartClicked(n))}),d()}if(t&2){let e=o.$implicit;P("product",e)}}var D=class t{categoryName=v.required();products=v.required();clicked=C();cartClicked=C();onClicked(o){this.clicked.emit(o)}onCartClicked(o){this.cartClicked.emit(o)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=y({type:t,selectors:[["app-product-category"]],inputs:{categoryName:[1,"categoryName"],products:[1,"products"]},outputs:{clicked:"clicked",cartClicked:"cartClicked"},decls:6,vars:1,consts:[[1,"product-category"],[1,"products"],[3,"product"],[3,"clicked","cartClicked","product"]],template:function(e,r){e&1&&(p(0,"div",0)(1,"h4"),x(2),d(),p(3,"div",1),S(4,wt,1,1,"app-product",2,bt),d()()),e&2&&(a(2),k(r.categoryName()),a(2),O(r.products()))},dependencies:[T],styles:[".product-category[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.product-category[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#009b91}.product-category[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;gap:10px}"]})};function Ct(t){let o=t.reduce((r,n)=>{let{category:c}=n;return r[c]||(r[c]=[]),r[c].push(n),r},{});return Object.keys(o).map(r=>({category:r,products:o[r]}))}function U(...t){return{reducer:t.pop(),events:t}}var N=Symbol(),yt=Symbol(),V=class{[N]=new J;on(...o){return this[N].pipe(Ot(o),jt())}},q=(()=>{class t extends V{static \u0275fac=(()=>{let e;return function(n){return(e||(e=z(t)))(n||t)}})();static \u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Pt=(()=>{class t extends V{static \u0275fac=(()=>{let e;return function(n){return(e||(e=z(t)))(n||t)}})();static \u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ot(t){if(t.length===0)return e=>e;let o=Et(t);return Q(({type:e})=>!!o[e])}function Et(t){return t.reduce((o,e)=>R(H({},o),{[e.type]:e}),{})}function jt(){return K(o=>{var t=Y(o,[]);return Object.defineProperty(t,yt,{value:t.type}),t})}var G=(()=>{class t{reducerEvents=i(Pt);events=i(q);dispatch(e){this.reducerEvents[N].next(e),this.events[N].next(e)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function It(t){let o=e=>({type:t,payload:e});return o.type=t,o}function ht(t){return Object.entries(t.events).reduce((o,[e])=>{let r=`[${t.source}] ${e}`;return R(H({},o),{[e]:It(r)})},{})}function Tt(t){return typeof t=="object"&&t!==null&&"type"in t}function _t(t){return M(void 0,b({onInit(o,e=i(G)){let r=t(o),n=Object.values(r).map(c=>c.pipe(_(s=>{Tt(s)&&!(yt in s)&&e.dispatch(s)})));B(...n).pipe(L()).subscribe()}}))}function vt(...t){return M({state:void 0},b({onInit(o,e=i(Pt)){let r=t.map(n=>e.on(...n.events).pipe(_(c=>{let s=n.reducer(c),Mt=Array.isArray(s)?s:[s];pt(o,...Mt)})));B(...r).pipe(L()).subscribe()}}))}var w=class t{http=i(ct);loadProducts(){return this.http.get("http/products.json")}static \u0275fac=function(e){return new(e||t)};static \u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})};function xt(){return M(I(()=>({log:ft(_(t=>console.log(t)))})))}var Ft={products:[],error:void 0,loading:!1},l=ht({source:"Products",events:{loadProducts:void 0,loadProductsSuccess:void 0,loadProductsFailure:void 0}}),A=dt(st(Ft),at(t=>({productsByCatogories:rt(()=>Ct(t.products()))})),vt(U(l.loadProducts,()=>({loading:!0})),U(l.loadProductsSuccess,({payload:t})=>({loading:!1,products:t}))),_t((t,o=i(q),e=i(w))=>({loadProducts$:o.on(l.loadProducts).pipe(W(()=>e.loadProducts().pipe(mt({next:r=>l.loadProductsSuccess(r),error:r=>l.loadProductsFailure(r)}))))})),xt(),I((t,o=i(w),e=i(it))=>({navigateToDetails:r=>e.navigate(["/products",r])})),b({onInit:t=>{t.log(t.error)}}));var Dt=(t,o)=>o.category;function Nt(t,o){if(t&1){let e=E();p(0,"app-product-category",2),j(1,"categoryName"),u("clicked",function(n){f(e);let c=h();return g(c.onProductClicked(n))})("cartClicked",function(n){f(e);let c=h();return g(c.onCartClicked(n))}),d()}if(t&2){let e=o.$implicit;P("categoryName",et(1,2,e.category))("products",e.products)}}var kt=class t{productsStore=i(A);#t=i(G);checkoutStore=i(ut);ngOnInit(){this.#t.dispatch(l.loadProducts())}onProductClicked(o){this.productsStore.navigateToDetails(o)}onCartClicked(o){this.checkoutStore.addProductToCart(o)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=y({type:t,selectors:[["app-products"]],features:[tt([A])],decls:3,vars:0,consts:[[1,"products-list"],[3,"categoryName","products"],[3,"clicked","cartClicked","categoryName","products"]],template:function(e,r){e&1&&(p(0,"div",0),S(1,Nt,2,4,"app-product-category",1,Dt),d()),e&2&&(a(),O(r.productsStore.productsByCatogories()))},dependencies:[D,lt],styles:[".products-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;gap:40px}"]})};export{kt as ProductsComponent};
